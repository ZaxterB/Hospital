--
-- PostgreSQL database dump
--

-- Dumped from database version 10.11 (Ubuntu 10.11-1.pgdg18.04+1)
-- Dumped by pg_dump version 10.11 (Ubuntu 10.11-1.pgdg18.04+1)

-- Started on 2020-02-13 20:59:15 GMT

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 196 (class 1259 OID 1957649029)
-- Name: BedEvent; Type: TABLE; Schema: public; Owner: timc
--

CREATE TABLE public."BedEvent" (
    bedeventid bigint NOT NULL,
    eventtime timestamp without time zone NOT NULL,
    type smallint NOT NULL,
    patientid bigint NOT NULL,
    bedid smallint NOT NULL,
    monitortype bigint NOT NULL
);


ALTER TABLE public."BedEvent" OWNER TO timc;

--
-- TOC entry 197 (class 1259 OID 1957649032)
-- Name: StaffEvent; Type: TABLE; Schema: public; Owner: timc
--

CREATE TABLE public."StaffEvent" (
    staffeventid bigint NOT NULL,
    eventtime timestamp without time zone NOT NULL,
    type smallint NOT NULL,
    staffid integer NOT NULL
);


ALTER TABLE public."StaffEvent" OWNER TO timc;

--
-- TOC entry 198 (class 1259 OID 1957649035)
-- Name: AllEvents; Type: VIEW; Schema: public; Owner: timc
--

CREATE VIEW public."AllEvents" AS
 SELECT "BedEvent".eventtime,
    "BedEvent".type,
    "BedEvent".bedeventid,
    "BedEvent".patientid,
    "BedEvent".bedid AS bed,
    "BedEvent".monitortype,
    "StaffEvent".staffeventid,
    "StaffEvent".staffid
   FROM (public."BedEvent"
     JOIN public."StaffEvent" USING (eventtime, type));


ALTER TABLE public."AllEvents" OWNER TO timc;

--
-- TOC entry 199 (class 1259 OID 1957649039)
-- Name: Bed; Type: TABLE; Schema: public; Owner: timc
--

CREATE TABLE public."Bed" (
    bedid integer NOT NULL,
    number integer NOT NULL
);


ALTER TABLE public."Bed" OWNER TO timc;

--
-- TOC entry 200 (class 1259 OID 1957649042)
-- Name: Monitortype; Type: TABLE; Schema: public; Owner: timc
--

CREATE TABLE public."Monitortype" (
    monitortypeid bigint NOT NULL,
    name character varying NOT NULL,
    defaultmax integer NOT NULL,
    defaultmin integer NOT NULL,
    dangermax integer NOT NULL,
    dangermin integer NOT NULL
);


ALTER TABLE public."Monitortype" OWNER TO timc;

--
-- TOC entry 201 (class 1259 OID 1957649048)
-- Name: Patient; Type: TABLE; Schema: public; Owner: timc
--

CREATE TABLE public."Patient" (
    patientid bigint NOT NULL,
    name character varying NOT NULL
);


ALTER TABLE public."Patient" OWNER TO timc;

--
-- TOC entry 202 (class 1259 OID 1957649054)
-- Name: Staff; Type: TABLE; Schema: public; Owner: timc
--

CREATE TABLE public."Staff" (
    staffid integer NOT NULL,
    name character varying NOT NULL,
    type smallint NOT NULL
);


ALTER TABLE public."Staff" OWNER TO timc;

--
-- TOC entry 2810 (class 2606 OID 1957649061)
-- Name: BedEvent BedEvent_pkey; Type: CONSTRAINT; Schema: public; Owner: timc
--

ALTER TABLE ONLY public."BedEvent"
    ADD CONSTRAINT "BedEvent_pkey" PRIMARY KEY (bedeventid);


--
-- TOC entry 2814 (class 2606 OID 1957649063)
-- Name: Bed Bed_pkey; Type: CONSTRAINT; Schema: public; Owner: timc
--

ALTER TABLE ONLY public."Bed"
    ADD CONSTRAINT "Bed_pkey" PRIMARY KEY (bedid);


--
-- TOC entry 2816 (class 2606 OID 1957649065)
-- Name: Monitortype Monitortype_pkey; Type: CONSTRAINT; Schema: public; Owner: timc
--

ALTER TABLE ONLY public."Monitortype"
    ADD CONSTRAINT "Monitortype_pkey" PRIMARY KEY (monitortypeid);


--
-- TOC entry 2818 (class 2606 OID 1957649067)
-- Name: Patient Patient_pkey; Type: CONSTRAINT; Schema: public; Owner: timc
--

ALTER TABLE ONLY public."Patient"
    ADD CONSTRAINT "Patient_pkey" PRIMARY KEY (patientid);


--
-- TOC entry 2812 (class 2606 OID 1957649069)
-- Name: StaffEvent StaffEvent_pkey; Type: CONSTRAINT; Schema: public; Owner: timc
--

ALTER TABLE ONLY public."StaffEvent"
    ADD CONSTRAINT "StaffEvent_pkey" PRIMARY KEY (staffeventid);


--
-- TOC entry 2820 (class 2606 OID 1957649071)
-- Name: Staff Staff_pkey; Type: CONSTRAINT; Schema: public; Owner: timc
--

ALTER TABLE ONLY public."Staff"
    ADD CONSTRAINT "Staff_pkey" PRIMARY KEY (staffid);


--
-- TOC entry 2821 (class 2606 OID 1957649077)
-- Name: BedEvent bedevent_fk; Type: FK CONSTRAINT; Schema: public; Owner: timc
--

ALTER TABLE ONLY public."BedEvent"
    ADD CONSTRAINT bedevent_fk FOREIGN KEY (bedid) REFERENCES public."Bed"(bedid);


--
-- TOC entry 2823 (class 2606 OID 1957649092)
-- Name: BedEvent monitortype_fk; Type: FK CONSTRAINT; Schema: public; Owner: timc
--

ALTER TABLE ONLY public."BedEvent"
    ADD CONSTRAINT monitortype_fk FOREIGN KEY (monitortype) REFERENCES public."Monitortype"(monitortypeid);


--
-- TOC entry 2822 (class 2606 OID 1957649082)
-- Name: BedEvent patient_fk; Type: FK CONSTRAINT; Schema: public; Owner: timc
--

ALTER TABLE ONLY public."BedEvent"
    ADD CONSTRAINT patient_fk FOREIGN KEY (patientid) REFERENCES public."Patient"(patientid);


--
-- TOC entry 2824 (class 2606 OID 1957649097)
-- Name: StaffEvent staffevent_fk; Type: FK CONSTRAINT; Schema: public; Owner: timc
--

ALTER TABLE ONLY public."StaffEvent"
    ADD CONSTRAINT staffevent_fk FOREIGN KEY (staffid) REFERENCES public."Staff"(staffid);


-- Completed on 2020-02-13 20:59:15 GMT

--
-- PostgreSQL database dump complete
--

